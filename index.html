<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#000000" />
    <title>Luxury Car Rental - Sewa Mobil Mewah</title>

    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Manifest -->
    <link rel="manifest" href="#" id="manifest-placeholder" />

    <style>
      :root {
        --gold: #ffd700;
        --dark-gold: #b8860b;
        --black: #000000;
        --dark-gray: #1a1a1a;
        --light-gray: #f5f5f5;
        --white: #ffffff;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: Arial, sans-serif;
        background-color: var(--light-gray);
        color: var(--black);
        transition: all 0.3s ease;
      }

      body.dark-mode {
        background-color: var(--black);
        color: var(--white);
      }

      body.dark-mode .navbar {
        background-color: var(--dark-gray) !important;
      }

      body.dark-mode .card {
        background-color: var(--dark-gray);
        color: var(--white);
        border-color: var(--gold);
      }

      body.dark-mode .form-control,
      body.dark-mode .form-select {
        background-color: #2a2a2a;
        color: var(--white);
        border-color: var(--gold);
      }

      body.dark-mode .modal-content {
        background-color: var(--dark-gray);
        color: var(--white);
      }

      body.dark-mode .testimonial-card {
        background-color: var(--dark-gray);
        border-color: var(--gold);
      }

      .navbar {
        background-color: var(--black) !important;
        padding: 1rem 0;
        box-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);
      }

      .navbar-brand {
        color: var(--gold) !important;
        font-weight: bold;
        font-size: 1.5rem;
      }

      .btn-gold {
        background-color: var(--gold);
        color: var(--black);
        border: none;
        padding: 10px 25px;
        font-weight: bold;
        transition: all 0.3s ease;
      }

      .btn-gold:hover {
        background-color: var(--dark-gold);
        color: var(--white);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
      }

      .hero-section {
        background: linear-gradient(
          135deg,
          var(--black) 0%,
          var(--dark-gray) 100%
        );
        color: var(--white);
        padding: 80px 0;
        text-align: center;
      }

      .hero-section h1 {
        color: var(--gold);
        font-size: 3rem;
        margin-bottom: 20px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      }

      .search-section {
        background-color: var(--white);
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        margin-top: -50px;
        position: relative;
        z-index: 10;
      }

      body.dark-mode .search-section {
        background-color: var(--dark-gray);
        box-shadow: 0 5px 20px rgba(255, 215, 0, 0.2);
      }

      .car-card {
        transition: all 0.3s ease;
        border: 2px solid transparent;
        height: 100%;
      }

      .car-card:hover {
        transform: translateY(-10px);
        border-color: var(--gold);
        box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
      }

      .car-image {
        height: 200px;
        object-fit: cover;
        border-radius: 10px 10px 0 0;
      }

      .price-tag {
        background-color: var(--gold);
        color: var(--black);
        padding: 10px 20px;
        border-radius: 25px;
        font-weight: bold;
        font-size: 1.2rem;
        display: inline-block;
        margin: 15px 0;
      }

      .rating {
        color: var(--gold);
      }

      .testimonial-card {
        background-color: var(--white);
        padding: 30px;
        border-radius: 10px;
        border: 2px solid var(--gold);
        margin: 20px 0;
      }

      .map-container {
        height: 400px;
        border-radius: 10px;
        overflow: hidden;
        border: 3px solid var(--gold);
      }

      #darkModeToggle {
        background: none;
        border: 2px solid var(--gold);
        color: var(--gold);
        padding: 8px 15px;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      #darkModeToggle:hover {
        background-color: var(--gold);
        color: var(--black);
      }

      .category-badge {
        background-color: var(--gold);
        color: var(--black);
        padding: 5px 15px;
        border-radius: 15px;
        font-size: 0.9rem;
        font-weight: bold;
      }

      footer {
        background-color: var(--black);
        color: var(--white);
        padding: 40px 0;
        margin-top: 60px;
      }

      .loading {
        display: none;
        text-align: center;
        padding: 20px;
      }

      .loading.show {
        display: block;
      }

      .install-prompt {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: var(--gold);
        color: var(--black);
        padding: 15px 25px;
        border-radius: 10px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        display: none;
        z-index: 1000;
      }

      .install-prompt.show {
        display: block;
        animation: slideIn 0.3s ease;
      }

      @keyframes slideIn {
        from {
          transform: translateX(400px);
        }
        to {
          transform: translateX(0);
        }
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
      <div class="container">
        <a class="navbar-brand" href="#">
          <i data-lucide="car" style="width: 30px; height: 30px"></i>
          Luxury Car Rental
        </a>
        <button id="darkModeToggle" onclick="toggleDarkMode()">
          <i data-lucide="moon" id="darkModeIcon"></i>
        </button>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
      <div class="container">
        <h1>Sewa Mobil Mewah dengan Mudah</h1>
        <p class="lead">
          Pilihan terbaik untuk perjalanan bisnis dan liburan Anda
        </p>
      </div>
    </section>

    <!-- Search Section -->
    <section class="container my-5">
      <div class="search-section">
        <div class="row g-3">
          <div class="col-md-3">
            <input
              type="text"
              class="form-control"
              id="searchInput"
              placeholder="Cari mobil..."
            />
          </div>
          <div class="col-md-3">
            <select class="form-select" id="categoryFilter">
              <option value="">Semua Kategori</option>
              <option value="Sedan">Sedan</option>
              <option value="SUV">SUV</option>
              <option value="Minibus">Minibus</option>
              <option value="Sport">Sport</option>
            </select>
          </div>
          <div class="col-md-3">
            <select class="form-select" id="priceFilter">
              <option value="">Semua Harga</option>
              <option value="0-500000">< Rp 500.000</option>
              <option value="500000-1000000">Rp 500.000 - 1.000.000</option>
              <option value="1000000-99999999">> Rp 1.000.000</option>
            </select>
          </div>
          <div class="col-md-3">
            <input
              type="text"
              class="form-control"
              id="locationFilter"
              placeholder="Lokasi..."
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Cars Grid -->
    <section class="container my-5">
      <h2 class="text-center mb-4">Armada Kami</h2>
      <div class="loading" id="loading">
        <div class="spinner-border text-warning" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
      <div class="row g-4" id="carsGrid"></div>
    </section>

    <!-- Testimonials -->
    <section class="container my-5">
      <h2 class="text-center mb-4">Testimoni Pelanggan</h2>
      <div class="row" id="testimonialsSection"></div>
    </section>

    <!-- Map Section -->
    <section class="container my-5">
      <h2 class="text-center mb-4">Lokasi Kami</h2>
      <div class="map-container">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3949.395256795405!2d110.8115381!3d-7.5988654!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e7a17917a011ce7%3A0x46ccabdfaa68d501!2sUniversitas%20Sugeng%20Hartono%20(USH)!5e0!3m2!1sen!2sid!4v1672139462577!5m2!1sen!2sid"
          width="100%"
          height="100%"
          style="border: 0"
          allowfullscreen=""
          loading="lazy"
        >
        </iframe>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="container text-center">
        <p>Made with ❤️ by Ricma Widya Kusuma</p>
        <p>&copy; 2025 Luxury Car Rental. All Rights Reserved.</p>
        <p>Sukoharjo, Central Java, Indonesia</p>
      </div>
    </footer>

    <!-- Booking Modal -->
    <div class="modal fade" id="bookingModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Pesan Mobil</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form id="bookingForm">
              <input type="hidden" id="bookingCarId" />
              <div class="mb-3">
                <label class="form-label">Nama Lengkap</label>
                <input
                  type="text"
                  class="form-control"
                  id="customerName"
                  required
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Nomor Telepon</label>
                <input
                  type="tel"
                  class="form-control"
                  id="customerPhone"
                  required
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Email</label>
                <input
                  type="email"
                  class="form-control"
                  id="customerEmail"
                  required
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Tanggal Mulai</label>
                <input
                  type="date"
                  class="form-control"
                  id="startDate"
                  required
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Tanggal Selesai</label>
                <input type="date" class="form-control" id="endDate" required />
              </div>
              <div class="mb-3">
                <label class="form-label">Catatan Tambahan</label>
                <textarea class="form-control" id="notes" rows="3"></textarea>
              </div>
              <div class="alert alert-info">
                <strong>Total Hari:</strong>
                <span id="totalDays">0</span> hari<br />
                <strong>Total Harga:</strong> Rp <span id="totalPrice">0</span>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Batal
            </button>
            <button
              type="button"
              class="btn btn-gold"
              onclick="confirmBooking()"
            >
              Konfirmasi Pemesanan
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Install Prompt -->
    <div class="install-prompt" id="installPrompt">
      <p class="mb-2"><strong>Install Aplikasi</strong></p>
      <p class="mb-3">Install untuk akses lebih cepat!</p>
      <button class="btn btn-sm btn-dark me-2" onclick="installApp()">
        Install
      </button>
      <button class="btn btn-sm btn-outline-dark" onclick="dismissInstall()">
        Nanti
      </button>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // Initialize Lucide Icons
      lucide.createIcons();

      // Car Data
      const cars = [
        {
          id: 1,
          name: "Mercedes-Benz S-Class",
          category: "Sedan",
          price: 1500000,
          location: "Bekasi",
          image: "assets/images/mercy-s-class.jpg",
          description: "Sedan mewah dengan kenyamanan premium",
          rating: 4.9,
        },
        {
          id: 2,
          name: "Toyota Fortuner",
          category: "SUV",
          price: 800000,
          location: "Jakarta",
          image: "assets/images/toyota-fortuner.jpeg",
          description: "SUV tangguh untuk segala medan",
          rating: 4.7,
        },
        {
          id: 3,
          name: "Toyota Alphard",
          category: "Minibus",
          price: 1200000,
          location: "Bekasi",
          image: "assets/images/toyota-alphard.png",
          description: "Minibus mewah dengan kapasitas 7 penumpang",
          rating: 4.8,
        },
        {
          id: 4,
          name: "BMW 3 Series",
          category: "Sedan",
          price: 1000000,
          location: "Jakarta",
          image: "assets/images/bmw-3-series.jpg",
          description: "Sedan sporty dengan performa tinggi",
          rating: 4.6,
        },
        {
          id: 5,
          name: "Honda CR-V",
          category: "SUV",
          price: 700000,
          location: "Bekasi",
          image: "assets/images/honda-crv.jpeg",
          description: "SUV modern dengan fitur lengkap",
          rating: 4.5,
        },
        {
          id: 6,
          name: "Porsche 911",
          category: "Sport",
          price: 3000000,
          location: "Jakarta",
          image: "assets/images/porsche-911.jpeg",
          description: "Mobil sport legendaris dengan performa luar biasa",
          rating: 5.0,
        },
      ];

      // Testimonials Data
      const testimonials = [
        {
          name: "Budi Santoso",
          text: "Pelayanan sangat memuaskan! Mobil bersih dan terawat dengan baik. Highly recommended!",
          rating: 5,
          date: "2 minggu lalu",
        },
        {
          name: "Siti Rahayu",
          text: "Proses booking mudah dan cepat. Mobil sesuai dengan foto dan deskripsi. Puas!",
          rating: 5,
          date: "1 bulan lalu",
        },
        {
          name: "Agus Wijaya",
          text: "Harga kompetitif dengan kualitas mobil yang excellent. Akan sewa lagi di sini.",
          rating: 4,
          date: "3 minggu lalu",
        },
      ];

      // Initialize
      let currentCar = null;
      let deferredPrompt;

      // Load preferences
      function loadPreferences() {
        const darkMode = localStorage.getItem("darkMode") === "true";
        if (darkMode) {
          document.body.classList.add("dark-mode");
          document
            .getElementById("darkModeIcon")
            .setAttribute("data-lucide", "sun");
        }

        const lastSearch = localStorage.getItem("lastSearch");
        if (lastSearch) {
          document.getElementById("searchInput").value = lastSearch;
        }

        const lastCategory = localStorage.getItem("lastCategory");
        if (lastCategory) {
          document.getElementById("categoryFilter").value = lastCategory;
        }
      }

      // Dark Mode Toggle
      function toggleDarkMode() {
        document.body.classList.toggle("dark-mode");
        const isDark = document.body.classList.contains("dark-mode");
        localStorage.setItem("darkMode", isDark);

        const icon = document.getElementById("darkModeIcon");
        icon.setAttribute("data-lucide", isDark ? "sun" : "moon");
        lucide.createIcons();
      }

      // Render Cars
      function renderCars(carsToRender = cars) {
        const grid = document.getElementById("carsGrid");
        grid.innerHTML = "";

        if (carsToRender.length === 0) {
          grid.innerHTML =
            '<div class="col-12 text-center"><p>Tidak ada mobil yang ditemukan.</p></div>';
          return;
        }

        carsToRender.forEach((car) => {
          const stars =
            "★".repeat(Math.floor(car.rating)) +
            "☆".repeat(5 - Math.floor(car.rating));

          const carCard = `
                    <div class="col-md-6 col-lg-4">
                        <div class="card car-card">
                            <img src="${
                              car.image
                            }" class="card-img-top car-image" alt="${car.name}">
                            <div class="card-body">
                                <span class="category-badge">${
                                  car.category
                                }</span>
                                <h5 class="card-title mt-3">${car.name}</h5>
                                <p class="card-text">${car.description}</p>
                                <div class="rating mb-2">${stars} (${
            car.rating
          })</div>
                                <p class="text-muted mb-2">
                                    <i data-lucide="map-pin" style="width: 16px; height: 16px;"></i> ${
                                      car.location
                                    }
                                </p>
                                <div class="price-tag">Rp ${car.price.toLocaleString(
                                  "id-ID"
                                )} / hari</div>
                                <button class="btn btn-gold w-100 mt-3" onclick="openBooking(${
                                  car.id
                                })">
                                    <i data-lucide="calendar" style="width: 16px; height: 16px;"></i>
                                    Pesan Sekarang
                                </button>
                            </div>
                        </div>
                    </div>
                `;
          grid.innerHTML += carCard;
        });

        lucide.createIcons();
      }

      // Render Testimonials
      function renderTestimonials() {
        const section = document.getElementById("testimonialsSection");
        testimonials.forEach((testimonial) => {
          const stars =
            "★".repeat(testimonial.rating) + "☆".repeat(5 - testimonial.rating);
          const card = `
                    <div class="col-md-4">
                        <div class="testimonial-card">
                            <div class="rating mb-2">${stars}</div>
                            <p>"${testimonial.text}"</p>
                            <p class="mb-0"><strong>${testimonial.name}</strong></p>
                            <small class="text-muted">${testimonial.date}</small>
                        </div>
                    </div>
                `;
          section.innerHTML += card;
        });
      }

      // Filter Cars
      function filterCars() {
        const search = document
          .getElementById("searchInput")
          .value.toLowerCase();
        const category = document.getElementById("categoryFilter").value;
        const priceRange = document.getElementById("priceFilter").value;
        const location = document
          .getElementById("locationFilter")
          .value.toLowerCase();

        localStorage.setItem("lastSearch", search);
        localStorage.setItem("lastCategory", category);

        let filtered = cars.filter((car) => {
          const matchSearch =
            car.name.toLowerCase().includes(search) ||
            car.description.toLowerCase().includes(search);
          const matchCategory = !category || car.category === category;
          const matchLocation =
            !location || car.location.toLowerCase().includes(location);

          let matchPrice = true;
          if (priceRange) {
            const [min, max] = priceRange.split("-").map(Number);
            matchPrice = car.price >= min && car.price <= max;
          }

          return matchSearch && matchCategory && matchPrice && matchLocation;
        });

        renderCars(filtered);
      }

      // Open Booking Modal
      function openBooking(carId) {
        currentCar = cars.find((c) => c.id === carId);
        document.getElementById("bookingCarId").value = carId;

        const today = new Date().toISOString().split("T")[0];
        document.getElementById("startDate").min = today;
        document.getElementById("endDate").min = today;

        const modal = new bootstrap.Modal(
          document.getElementById("bookingModal")
        );
        modal.show();

        localStorage.setItem("lastViewedCar", carId);
      }

      // Calculate Total Price
      function calculateTotal() {
        const startDate = new Date(document.getElementById("startDate").value);
        const endDate = new Date(document.getElementById("endDate").value);

        if (startDate && endDate && endDate >= startDate && currentCar) {
          const days =
            Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;
          const total = days * currentCar.price;

          document.getElementById("totalDays").textContent = days;
          document.getElementById("totalPrice").textContent =
            total.toLocaleString("id-ID");
        }
      }

      // Confirm Booking
      function confirmBooking() {
        const name = document.getElementById("customerName").value;
        const phone = document.getElementById("customerPhone").value;
        const email = document.getElementById("customerEmail").value;
        const startDate = document.getElementById("startDate").value;
        const endDate = document.getElementById("endDate").value;

        if (!name || !phone || !email || !startDate || !endDate) {
          alert("Mohon lengkapi semua data!");
          return;
        }

        const booking = {
          carId: currentCar.id,
          carName: currentCar.name,
          customerName: name,
          customerPhone: phone,
          customerEmail: email,
          startDate: startDate,
          endDate: endDate,
          totalPrice: document.getElementById("totalPrice").textContent,
          bookingDate: new Date().toISOString(),
        };

        // Save to localStorage
        let bookings = JSON.parse(localStorage.getItem("bookings") || "[]");
        bookings.push(booking);
        localStorage.setItem("bookings", JSON.stringify(bookings));

        alert(
          `Pemesanan berhasil!\n\nMobil: ${currentCar.name}\nNama: ${name}\nTanggal: ${startDate} - ${endDate}\nTotal: Rp ${booking.totalPrice}\n\nTerima kasih telah memesan!`
        );

        bootstrap.Modal.getInstance(
          document.getElementById("bookingModal")
        ).hide();
        document.getElementById("bookingForm").reset();
      }

      // PWA Installation
      window.addEventListener("beforeinstallprompt", (e) => {
        e.preventDefault();
        deferredPrompt = e;
        document.getElementById("installPrompt").classList.add("show");
      });

      function installApp() {
        if (deferredPrompt) {
          deferredPrompt.prompt();
          deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === "accepted") {
              console.log("PWA installed");
            }
            deferredPrompt = null;
            document.getElementById("installPrompt").classList.remove("show");
          });
        }
      }

      function dismissInstall() {
        document.getElementById("installPrompt").classList.remove("show");
      }

      // Event Listeners
      document
        .getElementById("searchInput")
        .addEventListener("input", filterCars);
      document
        .getElementById("categoryFilter")
        .addEventListener("change", filterCars);
      document
        .getElementById("priceFilter")
        .addEventListener("change", filterCars);
      document
        .getElementById("locationFilter")
        .addEventListener("input", filterCars);
      document
        .getElementById("startDate")
        .addEventListener("change", calculateTotal);
      document
        .getElementById("endDate")
        .addEventListener("change", calculateTotal);

      // Initialize App
      loadPreferences();
      renderCars();
      renderTestimonials();

      // Service Worker Registration
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register(createServiceWorker())
          .then((reg) => console.log("Service Worker registered"))
          .catch((err) => console.log("Service Worker registration failed"));
      }

      function createServiceWorker() {
        const swCode = `
                const CACHE_NAME = 'luxury-car-rental-v1';
                const urlsToCache = [
                    '/',
                    '/index.html'
                ];

                self.addEventListener('install', event => {
                    event.waitUntil(
                        caches.open(CACHE_NAME)
                            .then(cache => cache.addAll(urlsToCache))
                    );
                });

                self.addEventListener('fetch', event => {
                    event.respondWith(
                        caches.match(event.request)
                            .then(response => response || fetch(event.request))
                    );
                });
            `;

        const blob = new Blob([swCode], { type: "application/javascript" });
        return URL.createObjectURL(blob);
      }

      // Create Manifest
      const manifest = {
        name: "Luxury Car Rental",
        short_name: "Car Rental",
        description: "Aplikasi sewa mobil mewah",
        start_url: "/",
        display: "standalone",
        background_color: "#000000",
        theme_color: "#FFD700",
        icons: [
          {
            src: "https://via.placeholder.com/192x192/FFD700/000000?text=LCR",
            sizes: "192x192",
            type: "image/png",
          },
          {
            src: "https://via.placeholder.com/512x512/FFD700/000000?text=LCR",
            sizes: "512x512",
            type: "image/png",
          },
        ],
      };

      const manifestBlob = new Blob([JSON.stringify(manifest)], {
        type: "application/json",
      });
      const manifestURL = URL.createObjectURL(manifestBlob);
      document
        .getElementById("manifest-placeholder")
        .setAttribute("href", manifestURL);
    </script>
  </body>
</html>
